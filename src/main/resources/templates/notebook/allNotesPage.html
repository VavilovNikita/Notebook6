<!DOCTYPE html>
<html lang="en">
<head>
    <title>index</title>
    <!--/*/ <th:block th:insert="~{headers/header.html :: head}">
      </th:block> /*/-->
</head>
<body>

<!--/*/ <th:block th:insert="~{notebook/navbar.html :: navbar}">
      </th:block> /*/-->
<hr/>
<div class="row">
    <div class="col-1"></div>
    <div class="col-10">
        <div class="row align-items-center" style="height: 100px;">
            <div class="col-3 text-center"><b>Название</b></div>
            <div class="col-1"></div>
            <div class="col-4 text-center"><b>Создатель</b></div>
            <div class="col-2 text-center"><b>Дата последнего обновления</b></div>
            <div class="col-2 text-center"><b>Дата создания</b></div>
        </div>
        <div class="row align-items-center" th:each="notebook : ${notebook}">

            <li class="col-3 text-center nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown"
                   th:text="${notebook.title}"></a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" th:text="${notebook.text}" th:href="@{/notebook/{id}(id=${notebook.id})}"></a>
                </ul>
            </li>

            <div class="col-1 text-center">
                <a class="nav-item" th:if="${authUser.getId() == notebook.user.getId()}" th:href="@{/notebook/{id}/edit(id=${notebook.id})}"><i
                        class="fa-solid fa-pen-to-square"></i></a>

                <input type="hidden" th:value="*{notebook.text}" th:id="${notebook.id}">
                <a class="nav-item" th:onclick="'copyText(\'' + ${notebook.id} + '\')'"><i
                        class="fa-solid fa-copy"></i></a>
                <script th:inline="javascript">
                    function copyText(id) {
                        const copyText = document.getElementById(id);
                        copyText.select();
                        navigator.clipboard.writeText(copyText.value);
                    }
                </script>
                <form th:id="${notebook.id} + 'delete'" th:method="DELETE" th:action="@{/notebook/{id}(id=${notebook.id})}">
                </form>
                <a class="nav-item" th:if="${authUser.getId() == notebook.user.getId()}" th:onclick="'document.getElementById(\'' + ${notebook.id}  + 'delete' + '\').submit()'"><i
                        class="fa-solid fa-trash"></i></a>
                <!-- Кнопка-триггер модального окна -->
            </div>
            <div class="col-4 text-center" th:text="${notebook.user.firstName} + ' ' + ${notebook.user.lastName}">
            </div>
            <div class="col-2 text-center" th:text="${notebook.createdAt}">
            </div>
            <div class="col-2 text-center" th:text="${notebook.updatedAt}">
            </div>
            <hr/>

        </div>
        <div class="col-1"></div>
    </div>
</div>
</body>
</html>